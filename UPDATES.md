# آخرین بروزرسانی‌ها

## تاریخ: 1404/11/21

### مشکلات حل شده:

#### 1. ✅ رفع خطای 500 در ایجاد جلسه
- اضافه کردن try-catch به `perform_create` در `MeetingViewSet`
- اضافه کردن لاگ خطا برای دیباگ بهتر
- بهبود مدیریت خطا در فرانت‌اند با نمایش پیام خطا

#### 2. ✅ قابلیت حذف تسک برای ادمین
- اضافه کردن دکمه حذف (آیکون سطل زباله) به کارت‌های تسک
- فقط ادمین می‌تواند دکمه حذف را ببیند و استفاده کند
- اضافه کردن تایید قبل از حذف (confirm dialog)
- مدیریت خطا با نمایش پیام مناسب

#### 3. ✅ رفع مشکل Drag & Drop تسک‌ها
- اضافه کردن بررسی دسترسی قبل از تغییر وضعیت
- کاربران عادی فقط می‌توانند تسک‌های خودشان را جابجا کنند
- ادمین و اسکرام مستر می‌توانند همه تسک‌ها را جابجا کنند
- نمایش پیام خطا در صورت عدم دسترسی

#### 4. ✅ اضافه کردن فیلد یوزر استوری (User Story)
- اضافه کردن فیلد `user_story` به مدل `Sprint`
- اضافه کردن فیلد `user_story` به مدل `Backlog`
- ایجاد migration برای بروزرسانی دیتابیس
- بروزرسانی Serializer ها
- اضافه کردن فیلد یوزر استوری به فرم‌های ایجاد اسپرینت و بک‌لاگ
- نمایش یوزر استوری در جزئیات اسپرینت و کارت‌های بک‌لاگ
- placeholder مناسب: "به عنوان [نقش]، می‌خواهم [قابلیت] تا [هدف]"

### فایل‌های تغییر یافته:

#### Backend:
- `backend/core/models.py` - اضافه کردن فیلد user_story
- `backend/api/views.py` - رفع خطای ایجاد جلسه
- `backend/api/serializers.py` - اضافه کردن user_story به serializer ها
- `backend/core/migrations/0004_backlog_user_story_sprint_user_story.py` - Migration جدید

#### Frontend:
- `frontend/src/pages/Tasks.jsx` - حذف تسک و بهبود drag & drop
- `frontend/src/pages/Sprints.jsx` - اضافه کردن فیلد یوزر استوری
- `frontend/src/pages/Backlogs.jsx` - اضافه کردن فیلد یوزر استوری

### دستورات اجرا شده:
```bash
cd backend
python manage.py makemigrations
python manage.py migrate
python manage.py runserver
```

### وضعیت سرورها:
- ✅ Backend: http://127.0.0.1:8000/
- ✅ Frontend: در حال اجرا

### نکات مهم:
1. ادمین می‌تواند تمام تسک‌ها را حذف کند
2. کاربران عادی فقط می‌توانند تسک‌های خودشان را جابجا کنند
3. یوزر استوری اختیاری است و می‌توان آن را خالی گذاشت
4. تمام تاریخ‌ها به شمسی تبدیل شده‌اند
5. تقویم نمایش تسک‌ها، جلسات و اسپرینت‌ها را دارد

### تست‌های پیشنهادی:
- [ ] ایجاد جلسه جدید با شرکت‌کنندگان
- [ ] حذف تسک توسط ادمین
- [ ] جابجایی تسک‌ها با drag & drop
- [ ] ایجاد اسپرینت با یوزر استوری
- [ ] ایجاد بک‌لاگ با یوزر استوری
- [ ] مشاهده یوزر استوری در جزئیات
